<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>weather API</title>
</head>
<body>
    <span class="js-date">

    </span>

    <script>
        const weather = document.querySelector('.js-date');

        function getWeather(lat, lon){
            fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=02e1f20cb9f0609946d22679b7bf51a5&units=metric`).then(function(response){
                return response.json()
            }).then(function(json){
                const temper = json.main.temp;
                const today = json.weather[0].main;
                weather.innerHTML = `기온 : ${temper} and 날씨 : ${today}`
            })
        }

        function geoErr(){
            console.log('err')
        }

        function geoSucc(position){
            const lat = position.coords.latitude,
                  lon = position.coords.longitude;
                  
            const coordsObj = {
                lat,
                lon
            };
            getWeather(coordsObj.lat,coordsObj.lon)
            // saveCoords(coordsObj)
        }

        function loadCoords(){
            navigator.geolocation.getCurrentPosition(geoSucc,geoErr)
        }

        function init(){
            loadCoords()
            //coordination : 좌표
        }
        init()
    </script>
</body>
</html>